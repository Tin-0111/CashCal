<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>현질 효율 계산기</title>
    <script>
        function calculateBestPackage() {
            let budget = parseInt(document.getElementById("budget").value) || 0;
            
            const packages = [
                { name: "패키지 A", gems: 500, diamonds: 10, rubies: 10, price: 75000 },
                { name: "패키지 B", gems: 1000, diamonds: 20, rubies: 15, price: 140000 },
                { name: "패키지 C", gems: 200, diamonds: 5, rubies: 5, price: 35000 }
            ];
            
            function calculateEfficiency(pkg) {
                let totalGems = pkg.gems + (pkg.diamonds * 15) + (pkg.rubies * 13);
                let pricePerGem = pkg.price / totalGems;
                let efficiency = (100 / pricePerGem).toFixed(2);
                return { totalGems, pricePerGem, efficiency };
            }
            
            let bestOption = null;
            let bestEfficiency = 0;
            let resultText = "<h3>패키지 효율 분석</h3>";
            
            for (let pkg of packages) {
                let { totalGems, pricePerGem, efficiency } = calculateEfficiency(pkg);
                resultText += `<p>${pkg.name}: 총 ${totalGems} 보석, 1보석당 ${pricePerGem.toFixed(2)}원, 효율 ${efficiency}%</p>`;
                
                if (pkg.price <= budget && efficiency > bestEfficiency) {
                    bestEfficiency = efficiency;
                    bestOption = pkg;
                }
            }
            
            if (bestOption) {
                let { totalGems, pricePerGem, efficiency } = calculateEfficiency(bestOption);
                resultText += `<h3>최고 효율 패키지 추천</h3>`;
                resultText += `<p>${bestOption.name}: 총 ${totalGems} 보석, 1보석당 ${pricePerGem.toFixed(2)}원, 효율 ${efficiency}%</p>`;
            } else {
                resultText += `<p>예산 내에서 구매 가능한 최적의 패키지가 없습니다.</p>`;
            }
            
            document.getElementById("result").innerHTML = resultText;
        }
    </script>
</head>
<body>
    <h2>현질 효율 계산기</h2>
    <label>보유 금액 (KRW): <input type="number" id="budget" min="0"></label><br>
    <button onclick="calculateBestPackage()">계산하기</button>
    <div id="result"></div>
</body>
</html>
